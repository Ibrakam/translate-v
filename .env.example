# Video Translation & Dubbing Pipeline - Environment Configuration
# Copy this file to .env and fill in your actual values

# ==============================================================================
# REQUIRED API KEYS
# ==============================================================================

# DeepL API Key (REQUIRED for subtitle translation)
# Get your API key from: https://www.deepl.com/pro-api
# Free tier: 500,000 characters/month
# Pro tier: Unlimited with subscription
DEEPL_API_KEY=your_deepl_api_key_here

# ElevenLabs API Key (REQUIRED for voice dubbing)
# Get your API key from: https://elevenlabs.io
# Pricing: ~$30/month for Creator plan (100K characters)
# Higher tiers available for more usage
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here


# ==============================================================================
# WHISPER CONFIGURATION
# ==============================================================================

# Whisper model size
# Options: tiny, base, small, medium, large, large-v3
# Larger models are more accurate but slower and require more VRAM
# Recommended: large-v3 for best quality, base for speed
WHISPER_MODEL=large-v3

# Device for Whisper inference
# Options: cuda (GPU), cpu
# GPU is highly recommended (10-50x faster)
WHISPER_DEVICE=cuda


# ==============================================================================
# AUDIO PROCESSING
# ==============================================================================

# Audio sample rate in Hz
# 16000 is standard for speech recognition
AUDIO_SAMPLE_RATE=16000

# Number of audio channels
# 1 = mono (recommended for transcription)
# 2 = stereo
AUDIO_CHANNELS=1


# ==============================================================================
# CONCURRENCY SETTINGS
# ==============================================================================

# Maximum number of parallel worker processes
# Recommendation:
#   - CPU-only: 2-4 workers
#   - Single GPU: 1-2 workers (Whisper + Lip Sync use significant VRAM)
#   - Multiple GPUs: 1 worker per GPU
# Note: Each worker loads its own Whisper model instance
MAX_WORKERS=2


# ==============================================================================
# FFMPEG CONFIGURATION
# ==============================================================================

# Number of threads for FFmpeg
# 0 = auto (uses all available cores)
FFMPEG_THREADS=0


# ==============================================================================
# LIP SYNC CONFIGURATION
# ==============================================================================

# Path to Video Retalking installation
# Default: ./models/video-retalking
# Install from: https://github.com/OpenTalker/video-retalking
VIDEO_RETALKING_PATH=./models/video-retalking

# Path to Wav2Lip installation (alternative/fallback)
# Default: ./models/Wav2Lip
# Install from: https://github.com/Rudrabha/Wav2Lip
WAV2LIP_PATH=./models/Wav2Lip

# Lip sync method to use
# Options: videoretalking, wav2lip
# Video Retalking: Better quality, slower (~30-60 min for 1-hour video)
# Wav2Lip: Faster, lower quality (~10-20 min for 1-hour video)
LIPSYNC_METHOD=videoretalking


# ==============================================================================
# PIPELINE OUTPUT SETTINGS
# ==============================================================================

# Generate subtitle files (SRT)
# true = Generate translated SRT files
# false = Skip subtitle generation
GENERATE_SUBTITLES=true

# Generate dubbed audio tracks
# true = Generate voice-over audio using ElevenLabs TTS
# false = Skip audio dubbing (only subtitles)
GENERATE_DUBBING=true

# Apply lip synchronization to video
# true = Apply lip sync using Video Retalking/Wav2Lip
# false = Only replace audio without lip sync
# Note: Requires GENERATE_DUBBING=true
APPLY_LIPSYNC=true


# ==============================================================================
# RETRY CONFIGURATION
# ==============================================================================

# Maximum number of retry attempts for failed operations
MAX_RETRIES=3

# Initial delay between retries in seconds
# Uses exponential backoff (delay doubles each retry)
RETRY_DELAY=5


# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# Logging level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Detailed information for debugging
# INFO: General informational messages (recommended)
# WARNING: Warning messages only
LOG_LEVEL=INFO


# ==============================================================================
# NOTES & RECOMMENDATIONS
# ==============================================================================

# GPU MEMORY REQUIREMENTS (approximate):
# ┌────────────────────┬─────────────┐
# │ Component          │ VRAM Needed │
# ├────────────────────┼─────────────┤
# │ Whisper tiny       │ ~1 GB       │
# │ Whisper base       │ ~1 GB       │
# │ Whisper small      │ ~2 GB       │
# │ Whisper medium     │ ~5 GB       │
# │ Whisper large-v3   │ ~10 GB      │
# │ Video Retalking    │ ~6-8 GB     │
# │ Wav2Lip            │ ~2-4 GB     │
# └────────────────────┴─────────────┘
#
# Recommended total VRAM:
# - Minimum: 8 GB (base Whisper + Wav2Lip)
# - Recommended: 16 GB (large Whisper + Video Retalking)
# - Optimal: 24 GB+ (large Whisper + Video Retalking with room)

# PROCESSING TIME ESTIMATES (1-hour video, RTX 3090):
# ┌────────────────────┬──────────────┬──────────────┐
# │ Step               │ GPU Time     │ CPU Time     │
# ├────────────────────┼──────────────┼──────────────┤
# │ Audio Extraction   │ 10-30 sec    │ 10-30 sec    │
# │ Transcription      │ 5-10 min     │ 60-120 min   │
# │ Translation        │ 30-60 sec    │ 30-60 sec    │
# │ TTS (ElevenLabs)   │ 2-5 min      │ 2-5 min      │
# │ Lip Sync           │ 20-40 min    │ Not viable   │
# ├────────────────────┼──────────────┼──────────────┤
# │ TOTAL              │ ~30-60 min   │ Several hrs  │
# └────────────────────┴──────────────┴──────────────┘

# API COSTS (approximate for 1-hour video):
# - ElevenLabs TTS: $3-10 (depending on plan and characters)
# - DeepL Translation: Free (within 500K char/month limit)
# - Total cost per video: $3-10

# WORKFLOW EXAMPLES:
#
# 1. Full Production (Subtitles + Dubbing + Lip Sync):
#    GENERATE_SUBTITLES=true
#    GENERATE_DUBBING=true
#    APPLY_LIPSYNC=true
#
# 2. Subtitles Only (fastest, cheapest):
#    GENERATE_SUBTITLES=true
#    GENERATE_DUBBING=false
#    APPLY_LIPSYNC=false
#
# 3. Dubbing without Lip Sync (good quality, faster):
#    GENERATE_SUBTITLES=true
#    GENERATE_DUBBING=true
#    APPLY_LIPSYNC=false
#
# 4. Testing/Development (fastest iteration):
#    WHISPER_MODEL=base
#    GENERATE_SUBTITLES=true
#    GENERATE_DUBBING=false
#    APPLY_LIPSYNC=false
